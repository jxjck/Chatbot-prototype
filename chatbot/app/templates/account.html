{% extends "base.html" %}
{% block title %}Account{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4">Account</h2>

  <p>Your current e-mail address is <b>{{ current_user.email }}</b>.</p>
  <a href="{{ url_for('change_email') }}" class="btn btn-primary mb-2 w-100">
    Change your e-mail address
  </a>

  <a href="{{ url_for('reset_password') }}" class="btn btn-secondary mb-2 w-100">
    Reset your password
  </a>

  <!-- Delete chat history -->
  <button class="btn btn-danger w-100" data-bs-toggle="collapse"
          data-bs-target="#confirmDelete" aria-expanded="false">
    Delete your chat history
  </button>

  <div class="collapse mt-3" id="confirmDelete">
    <div class="card card-body bg-dark text-white">
      <p class="mb-2">Are you sure you want to permanently delete all your conversation history?</p>
      <div class="d-flex gap-2">
        <form action="{{ url_for('delete_history') }}" method="post" class="m-0">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <button type="submit" class="btn btn-danger me-2 w-auto">Yes</button>
        </form>

        <button class="btn btn-outline-light w-auto" data-bs-toggle="collapse"
                data-bs-target="#confirmDelete">No</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}